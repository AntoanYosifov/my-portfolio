{{ define "main" }}
<div class="max-w-4xl mx-auto px-4 pt-12 pb-6">
    <div class="mb-0"></div>
    <div class="bg-[#121212] p-8 rounded-lg">
        <div class="prose prose-invert prose-lg max-w-none">
            <div class="text-gray-300 text-lg mb-8">
                {{ .Content }}
            </div>

            <div class="flex flex-col items-center gap-4">
                <!-- Email -->
                <div class="relative contact-email-container w-full max-w-[400px]">
                    <button 
                        type="button"
                        class="contact-email-menu-btn contact-link flex items-center gap-4 p-4 rounded-lg bg-[#121212] border border-gray-800 group w-full text-left"
                        data-email="{{ .Site.Params.email }}"
                    >
                        <svg class="w-7 h-7 text-gray-400 shrink-0 group-hover:text-gray-200 transition-colors duration-300" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="1.75">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"/>
                        </svg>
                        <div class="min-w-0 flex-1">
                            <div class="text-gray-400 group-hover:text-gray-200 transition-colors duration-300">Email</div>
                            <div class="text-sm text-gray-500 group-hover:text-gray-400 transition-colors duration-300 break-words">{{ .Site.Params.email }}</div>
                        </div>
                    </button>
                    <!-- Email Options Dropdown -->
                    <div class="contact-email-dropdown absolute top-full right-0 mt-1 bg-gray-800 border border-gray-700 rounded-lg shadow-lg overflow-hidden opacity-0 invisible pointer-events-none transition-all duration-200 z-50 min-w-[200px]">
                        <button 
                            type="button"
                            class="contact-email-copy-option w-full text-left px-4 py-2.5 text-sm text-gray-200 hover:bg-gray-700 transition-colors duration-150 flex items-center gap-2"
                            data-email="{{ .Site.Params.email }}"
                        >
                            <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z" />
                            </svg>
                            <span>Copy email</span>
                        </button>
                        <a 
                            href="mailto:{{ .Site.Params.email }}"
                            class="contact-email-mailto-option block w-full text-left px-4 py-2.5 text-sm text-gray-200 hover:bg-gray-700 transition-colors duration-150 flex items-center gap-2"
                        >
                            <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" />
                            </svg>
                            <span>Open email client</span>
                        </a>
                    </div>
                    <!-- Success feedback tooltip -->
                    <span class="contact-email-copied-tooltip absolute -top-10 left-1/2 transform -translate-x-1/2 bg-gray-800 text-white text-xs px-2 py-1 rounded opacity-0 pointer-events-none transition-opacity duration-200 whitespace-nowrap z-50">Copied!</span>
                </div>

                <!-- Discord -->


                <!-- LinkedIn -->
                <a href="{{ .Site.Params.linkedin }}" target="_blank" class="contact-link flex items-center gap-4 p-4 rounded-lg bg-[#121212] border border-gray-800 group w-full max-w-[400px]">
                    <svg class="w-7 h-7 text-gray-400 shrink-0 group-hover:text-gray-200 transition-colors duration-300" fill="currentColor" viewBox="0 0 24 24">
                        <path d="M20.47 2H3.53a1.45 1.45 0 0 0-1.47 1.43v17.14A1.45 1.45 0 0 0 3.53 22h16.94a1.45 1.45 0 0 0 1.47-1.43V3.43A1.45 1.45 0 0 0 20.47 2ZM8.09 18.74h-3v-9h3ZM6.59 8.48a1.56 1.56 0 1 1 0-3.12a1.57 1.57 0 1 1 0 3.12Zm12.32 10.26h-3v-4.83c0-1.21-.43-2-1.52-2A1.65 1.65 0 0 0 12.85 13a2 2 0 0 0-.1.73v5h-3v-9h3V11a3 3 0 0 1 2.71-1.5c2 0 3.45 1.29 3.45 4.06Z"/>
                    </svg>
                    <div class="min-w-0 flex-1">
                        <div class="text-gray-400 group-hover:text-gray-200 transition-colors duration-300">LinkedIn</div>
                        <div class="text-sm text-gray-500 group-hover:text-gray-400 transition-colors duration-300 truncate">in/{{ .Site.Params.linkedin_username }}</div>
                    </div>
                </a>

                <!-- Twitter -->
                <a href="{{ .Site.Params.github }}" target="_blank" class="contact-link flex items-center gap-4 p-4 rounded-lg bg-[#121212] border border-gray-800 group w-full max-w-[400px]">
                    <svg xmlns="http://www.w3.org/2000/svg"
                         class="w-7 h-7 text-gray-400 shrink-0 group-hover:text-gray-200 transition-colors duration-300"
                         fill="currentColor"
                         viewBox="0 0 24 24">
                        <path d="M12 .297c-6.627 0-12 5.373-12 12
             0 5.302 3.438 9.8 8.205 11.387.6.113.82-.258.82-.577
             v-2.234c-3.338.724-4.033-1.416-4.033-1.416
             -.546-1.387-1.333-1.756-1.333-1.756
             -1.089-.745.083-.729.083-.729
             1.205.084 1.839 1.237 1.839 1.237
             1.07 1.834 2.809 1.304 3.495.997
             .108-.775.419-1.305.762-1.605
             -2.665-.304-5.466-1.332-5.466-5.93
             0-1.31.469-2.381 1.236-3.221
             -.124-.304-.536-1.523.117-3.176
             0 0 1.008-.322 3.301 1.23
             .957-.266 1.983-.399 3.003-.404
             1.02.005 2.047.138 3.006.404
             2.292-1.552 3.298-1.23 3.298-1.23
             .653 1.653.242 2.872.118 3.176
             .77.84 1.236 1.911 1.236 3.221
             0 4.61-2.804 5.624-5.476 5.921
             .43.37.815 1.103.815 2.222
             v3.293c0 .319.218.694.825.576
             C20.565 22.092 24 17.593 24 12.297
             c0-6.627-5.373-12-12-12z"/>
                    </svg>
                    <div class="min-w-0 flex-1">
                        <div class="text-gray-400 group-hover:text-gray-200 transition-colors duration-300">GitHub</div>
                        <div class="text-sm text-gray-500 group-hover:text-gray-400 transition-colors duration-300 truncate">{{ .Site.Params.github_username }}</div>
                    </div>
                </a>
            </div>
        </div>
    </div>
</div>

<style>
    .prose {
        @apply text-gray-300;
    }
    .prose p {
        @apply text-gray-300 mb-6;
        line-height: 1.9;
    }

    .contact-link {
        position: relative;
        overflow: hidden;
        border: 1px solid #1f1f1f;
        transition: color 0.2s ease-in-out;
    }

    .contact-email-menu-btn {
        background: transparent;
        border: none;
        cursor: pointer;
        margin: 0;
        font: inherit;
        color: inherit;
        width: 100%;
        display: flex;
        align-items: center;
    }

    @media (max-width: 768px) {
        .contact-link {
            width: 100%;
        }
    }

    .contact-email-copied-tooltip.show {
        opacity: 1;
    }

    .contact-email-dropdown.show {
        opacity: 1;
        visibility: visible;
        pointer-events: auto;
    }
</style>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const contactEmailMenuBtn = document.querySelector('.contact-email-menu-btn');
    const contactEmailDropdown = document.querySelector('.contact-email-dropdown');
    const contactEmailCopyOption = document.querySelector('.contact-email-copy-option');
    const contactTooltip = document.querySelector('.contact-email-copied-tooltip');
    
    if (contactEmailMenuBtn && contactEmailDropdown) {
        // Toggle dropdown on button click
        contactEmailMenuBtn.addEventListener('click', function(e) {
            e.preventDefault();
            e.stopPropagation();
            contactEmailDropdown.classList.toggle('show');
        });

        // Copy email functionality
        if (contactEmailCopyOption && contactTooltip) {
            contactEmailCopyOption.addEventListener('click', async function(e) {
                e.preventDefault();
                e.stopPropagation();
                
                const email = this.getAttribute('data-email');
                
                try {
                    // Use the modern Clipboard API
                    await navigator.clipboard.writeText(email);
                    
                    // Show feedback
                    contactTooltip.classList.add('show');
                    
                    // Close dropdown
                    contactEmailDropdown.classList.remove('show');
                    
                    // Hide tooltip after 2 seconds
                    setTimeout(() => {
                        contactTooltip.classList.remove('show');
                    }, 2000);
                } catch (err) {
                    // Fallback for older browsers
                    const textArea = document.createElement('textarea');
                    textArea.value = email;
                    textArea.style.position = 'fixed';
                    textArea.style.left = '-999999px';
                    document.body.appendChild(textArea);
                    textArea.select();
                    
                    try {
                        document.execCommand('copy');
                        contactTooltip.classList.add('show');
                        contactEmailDropdown.classList.remove('show');
                        setTimeout(() => {
                            contactTooltip.classList.remove('show');
                        }, 2000);
                    } catch (err) {
                        console.error('Failed to copy email:', err);
                    }
                    
                    document.body.removeChild(textArea);
                }
            });
        }

        // Close dropdown when clicking outside
        document.addEventListener('click', function(e) {
            if (!contactEmailMenuBtn.contains(e.target) && !contactEmailDropdown.contains(e.target)) {
                contactEmailDropdown.classList.remove('show');
            }
        });

        // Close dropdown on Escape key
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape' && contactEmailDropdown.classList.contains('show')) {
                contactEmailDropdown.classList.remove('show');
            }
        });
    }
});
</script>
{{ end }}